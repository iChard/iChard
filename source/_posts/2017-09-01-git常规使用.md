---
title: git常规使用
tags:
  - git
  - 版本控制
categories:
  - 技术
  - 其他
date: 2017-09-01 16:22:32
---

### 分支branch

1. git branch newBranch新建一个分支
2. git checkout newBranch切换到newBranch分支
3. git checkout b newBranch一步操作
4. git branch本地已存在的分支
5. git branch -a全部分支
6. git branch -r远程分支   
 
<!--more-->
7. git branch -d -r branchname删除远程分支

###合并代码merge
1. git merge featureBranch 在git log历史不会显示featurnBranch信息
2. git merge --no-ff branchName 不适用fast-forword方式合并，保留分支的commit历史
3. git merge --squash 使用squash方式合并，把多次commit历史压缩为一次

### 代码回滚
#### 本地回滚
1. git log根据commit内容得到想要回滚版本的hashId
2. git reset --hard hashKey(hashkey为上一步复制的hashId)

#### 远程回滚
1. 确保当前分支的远程分支在远程服务端没有受到protected(保护)
2. git checkout targetBranch
3. git pull
4. git reset --hard hashId
5. git push origin :targetBranch//删除远程分支
6. git push --set-upstream origin targetBranch将本地回滚的代码推送到远程分支targetBranch并建立联系
7. 5、6两步可以通过git push origin targetBranch -f代替

#### 删除
1. 本地分支删除 git branch -D targetBranch
2. 远程分支删除 git push origin :targetBranch
3. 删除本地分支索引git branch -r -d origin/targetBranch