---
title: canvas动画
tags:
  - git
categories:
  - 技术
  - 前端
date: 2017-09-01 16:14:55
---

## performance全局对象
1. performance.timing存放的是当前页面对应的时间戳  报错开始渲染时间、加载时间等
2. performance.timing.navigationStart当前页面导航开始时间
3. performance.now()当前页面的时间距离performance.timing.navigationStart的差值（精确到毫秒），通俗点讲就是当前页面存在的时间长度  

<!-- more -->
## requestAnimationFrame(cb(timeStamp))
浏览器动画执行函数、timeStamp为默认的参数，表示的是requestAnimationFrame执行时的performance.now()的值;该函数表示在requestAnimationFrame启动的时间点执行cb函数来重画动画
1. 注意：执行动画时，需要在回调函数内部继续调用requestAnimationFrame函数循环执行
2. 返回值： 一个正整数值id 
## cancelAnimationFrame(id)
接收一个requestAnimationFrame返回的id 
用于取消动画
```javascript
var start = null;
var element = document.getElementById('example');
element.style.position = 'absolute';
var myReq
function step(timestamp) {
    if (!start) start = timestamp;//start取第一次执行requestAnimationFrame的值  timestamp为每次执行requestAnimationFrame的时间戳
    var progress = timestamp - start;
    element.style.left = Math.min(progress / 10, 2000) + 'px';
    if (progress < 20000) {
        myReq = window.requestAnimationFrame(step);
    }
}
myReq = window.requestAnimationFrame(step)
setTimeout(() => {
    cancelAnimationFrame(myReq)
},2000)
```